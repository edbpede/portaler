---
interface Props {
	publishers: string[];
}

const { publishers } = Astro.props;
---

<div class="bg-white p-6 rounded-lg shadow-sm mb-6">
	<div class="grid grid-cols-1 md:grid-cols-2 gap-4">
		<div>
			<label for="platform-search" class="block text-sm font-medium text-gray-700 mb-2">
				SÃ¸g efter platform
			</label>
			<input
				type="search"
				id="platform-search"
				class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"
				placeholder="Indtast platformnavn..."
			/>
		</div>
		
		<div>
			<label for="publisher-filter" class="block text-sm font-medium text-gray-700 mb-2">
				Filtrer efter udgiver
			</label>
			<select
				id="publisher-filter"
				class="w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"
			>
				<option value="">Alle udgivere</option>
				{publishers.map(publisher => (
					<option value={publisher}>{publisher}</option>
				))}
			</select>
		</div>
	</div>
</div>

<script>
	const searchInput = document.getElementById('platform-search') as HTMLInputElement;
	const publisherSelect = document.getElementById('publisher-filter') as HTMLSelectElement;
	const platformCards = document.querySelectorAll('.platform-card');

	function filterPlatforms() {
		const searchTerm = searchInput.value.toLowerCase();
		const selectedPublisher = publisherSelect.value;

		platformCards.forEach(card => {
			const title = card.querySelector('.platform-title')?.textContent?.toLowerCase() || '';
			const publisher = card.querySelector('.platform-publisher')?.textContent?.toLowerCase() || '';
			
			const matchesSearch = title.includes(searchTerm);
			const matchesPublisher = !selectedPublisher || publisher.includes(selectedPublisher.toLowerCase());

			if (matchesSearch && matchesPublisher) {
				(card as HTMLElement).style.display = 'block';
			} else {
				(card as HTMLElement).style.display = 'none';
			}
		});
	}

	searchInput.addEventListener('input', filterPlatforms);
	publisherSelect.addEventListener('change', filterPlatforms);
</script>